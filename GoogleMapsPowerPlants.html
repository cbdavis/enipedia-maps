<!DOCTYPE html>
<html>
    <head>
        <title>Enipedia Maps Sandbox</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <meta charset="UTF-8">
        <style type="text/css">
        html, body, #map_canvas {
            margin: 0;
            padding: 0;
            height: 100%;
        }

        #tooltip{
            position:absolute;
            border:1px solid #333;
            background:#f7f5d1;
            padding:2px 5px;
            color:#333;
            display:none;
        }
        .fuelCheckBoxTD{
            vertical-align:text-top;
            text-align:center;
            padding:0px;
        }
        .fuelLabelTD{
            padding:0px;
            border:0px;
            font-size:8pt;
        }
        .fuelCount{
            font-size:xx-small;
            font-style:italic;
        }
        .ui-autocomplete {
            max-height: 250px;
            overflow-y: auto;
            overflow-x: hidden;
            padding-right: 20px;
        }
        .ui-menu-item {
            font-size:8pt;
            font-weigh: normal;
        }

        </style>

        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="http://code.jquery.com/ui/1.8.23/jquery-ui.min.js" type="text/javascript"></script>
        <script src="http://jquery-ui.googlecode.com/svn/tags/latest/external/jquery.bgiframe-2.1.2.min.js" type="text/javascript"></script>
        <script src="http://jquery-ui.googlecode.com/svn/tags/latest/ui/minified/i18n/jquery-ui-i18n.min.js" type="text/javascript"></script>
        <script src="http://jawj.github.com/OverlappingMarkerSpiderfier/bin/oms.min.js" type="text/javascript"></script>

        <link rel="stylesheet" href="http://code.jquery.com/ui/1.8.23/themes/base/jquery-ui.css" type="text/css" />
        
        <script type="text/javascript">


        var map;
        var markersEnipedia = [];
        var markersEUETS = [];
        var oms;

        var infowindowEnipedia = new google.maps.InfoWindow();

        var queryString = {};

        var fuelCounts = {biomass: 0, biogas: 0, coal: 0, gas: 0, geothermal: 0, oil: 0, hydro: 0, nuclear: 0, solar: 0, wave: 0, waste: 0, wind: 0, unknown: 0}
        var fuelGroupsDisplayed = {"Biomass": true, "Biogas": true, "Coal": true, "Gas": true, "Geothermal": true, "Oil": true, "Hydro": true, "Nuclear": true, "Solar": true, "Wave": true, "Waste": true, "Wind": true, "Unknown": true}
        var fuelGroupsByMetaGroup = { nuclear: ["Nuclear"],
                fossil: ["Coal", "Gas", "Oil"],
                renewable: ["Biomass", "Biogas", "Geothermal", "Hydro", "Solar", "Wave", "Waste", "Wind"]}

        var data = new Object();
        var selectedOwner = "";        

        $(function(){

            var params = location.search.split(/[?&]/);
            for (i in params) {
                param = params[i].split("=");
                queryString[param[0]] = param[1];
                // initialize fuel icons
                if (param[0].indexOf("fuel") == 0 && fuelGroupsDisplayed.hasOwnProperty(param[0].substr(4)))
                    fuelGroupsDisplayed[param[0].substr(4)] = (param[1] != 0);
            }
            

            //initialize meta checkboxes
            $('#show_nuclear').prop('checked', true);
            $('#show_fossil').prop('checked', true);
            $('#show_renewable').prop('checked', true);
            $('#show_all').prop('checked', true);
            
            // initialize fuel icons
            matchIconsToDisplayStates();

            //initailize autocompletion for owners
            $("#enipedia_owner").autocomplete({ 
                source: function(request, response) {
                    $.ajax({
                        url: "http://enipedia.tudelft.nl/enipedia/api.php",
                        dataType: "jsonp",
                        data: {
                            action: "sfautocomplete",
                            category: "Energy Company",
                            substr: request.term,
                            limit: 20,
                            format: "json"
                        },
                        success: function( data ) {
                                    response( $.map( data.sfautocomplete, function(item) {
                                        return {
                                            label: item.title,
                                            value: item.title
                                        }
                                    }));
                        }
                    });
                },
                minLength: 2,
                select: function(event, ui) {
                            if (ui.item) {
                                window.selectedOwner = ui.item.label;
                                if ($("#enipedia_country").prop("value") == "" || $("#enipedia_country").prop("value") == undefined)
                                    load_ppl_enipedia("", ui.item.label, true);
                                else
                                    matchMarkersToSelection(window.markersEnipedia);
                            }
                        }
            });
            
            // initialize google maps display
            
            var myOptions = {
                zoom: 2,
                center: new google.maps.LatLng(20, 0),
                mapTypeId: google.maps.MapTypeId.HYBRID
            };

/*              
            myITOOptions = {
                    getTileUrl: function(coord, zoom) {
                        return "http://t" + Math.floor(Math.random()*4) + ".beta.itoworld.com/4/770fc0c2b467b4cb16c330d996e2ddd2/" 
                                + zoom + "/" + coord.x + "/" + coord.y + ".png";
                    },
                    tileSize: new google.maps.Size(256, 256),
                    isPng: true,
                    opacity: 0.5,
                    alt: "ITOWorld Power Transmission",
                    name: "ITOWorld"
            }

            map.overlayMapTypes.insertAt(0, new google.maps.ImageMapType(myITOOptions));
*/
            map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

            var controlDiv = createControls();
            map.controls[google.maps.ControlPosition.TOP].push(controlDiv);
            
            oms = new OverlappingMarkerSpiderfier(map, {nearbyDistance: 32});
            oms.addListener("click", open_info_enipedia);
            oms.addListener("spiderfy", function(markers) { infowindowEnipedia.close() });
            oms.legColors.usual[google.maps.MapTypeId.HYBRID] = oms.legColors.usual[google.maps.MapTypeId.SATELLITE] = "#0ff";
            oms.legColors.highlighted[google.maps.MapTypeId.HYBRID] = oms.legColors.highlighted[google.maps.MapTypeId.SATELLITE] = "#f0f";

                
            function createControls() {
            
                var controlDiv = document.createElement('div');
                controlDiv.id = "map_controls";
                controlDiv.style.backgroundColor = "#DDDDDD";
                controlDiv.style.fontFamily = 'Arial,sans-serif';
                controlDiv.style.fontSize = '10pt';

                //TODO is there a smarter way of doing this?  
                //cboEnipediaCountries needs be accessible in this function, can't place this html in the body since it won't find it on page load.

                controlDiv.appendChild(document.getElementById('everything'));
/*
                controlDiv.appendChild(document.createTextNode("\u00a0\u00a0\u00a0"));
                var chkITO = document.createElement('input');
                chkITO.setAttribute("type", "checkbox");
                chkITO.setAttribute("checked", "true");
                chkITO.id = "ito";
                controlDiv.appendChild(chkITO);
                google.maps.event.addDomListener(chkITO, 'change', function() { if(chkITO.checked) 
                                                                                    map.overlayMapTypes.insertAt(0, new google.maps.ImageMapType(myITOOptions));
                                                                                else
                                                                                    map.overlayMapTypes.removeAt(0) });
                controlDiv.appendChild(document.createTextNode("ITOWorld power distribution"));
*/

                $.ajax({
                    url: 'http://enipedia.tudelft.nl/sparqltest2',
                    data: {
                    query: "BASE <http://enipedia.tudelft.nl/wiki/>\n" + 
                        "PREFIX prop: <http://enipedia.tudelft.nl/wiki/Property:>\n" + 
                        "PREFIX cat: <http://enipedia.tudelft.nl/wiki/Category:>\n" + 
                        "PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n" + 
                        "PREFIX fn: <http://www.w3.org/2005/xpath-functions#>\n" + 
                        "select distinct(substr(str(?ctry),33) as ?country) where {\n" + 
                        "  ?ppl rdf:type cat:Powerplant .\n" + 
                        "  ?ppl prop:Country ?ctry .\n" + 
                        "} order by ?country",
                        output: "json" 
                    },
                    dataType: 'jsonp',
                    success: function(data) { 
                                var cboEnipediaCountries = document.getElementById('enipedia_countries');
                                var opt = document.createElement('option');
                                opt.appendChild(document.createTextNode(""));
                                cboEnipediaCountries.appendChild(opt);
                                
                                var list = data.results.bindings;
                                for (i = 0; i < list.length; i++) {
                                    var opt = document.createElement('option');
                                    if (list[i].country.value == queryString["enipedia_country"])
                                        opt.setAttribute("selected", "true");
                                    opt.setAttribute("value", list[i].country.value);
                                    opt.appendChild(document.createTextNode(list[i].country.value));
                                    cboEnipediaCountries.appendChild(opt);
                                } }
                });
                
                if (queryString["enipedia_country"] || queryString["enipedia_owner"])
                    load_ppl_enipedia(queryString["enipedia_country"], queryString["enipedia_owner"], true)

                return controlDiv;
            }

        });


        function load_ppl_enipedia(country, owner, zoom) {

            clearMarkers(markersEnipedia);
            
            if (country == undefined)
                country = "";
            if (owner == undefined)
                owner = "";
            selectedOwner = owner;
            
            $.ajax({
                    url: 'http://enipedia.tudelft.nl/sparqltest2',
                    data: {
                        query: "BASE <http://enipedia.tudelft.nl/wiki/>\n" + 
                            "PREFIX a: <http://enipedia.tudelft.nl/wiki/>\n" + 
                            "PREFIX prop: <http://enipedia.tudelft.nl/wiki/Property:>\n" + 
                            "PREFIX cat: <http://enipedia.tudelft.nl/wiki/Category:>\n" + 
                            "PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n" + 
                            "PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n" + 
                            "select (substr(str(?ppl), 33) as ?wiki) ?name (substr(str(?own), 33) as ?ownerenc) ?owner \n" + 
                            "?zip (substr(str(?town), 33) as ?city) (substr(str(?stat), 33) as ?state) ?point \n" + 
                            "(substr(str(?fuel_type), 33) as ?fuel) (round(?out / 3600000000) as ?Output_MWh) \n" + 
                            "(round(?co2 / 1000) as ?CO2_emissions) (round(?intensity) as ?CO2_intensity) where {\n" +
                            "GRAPH <http://enipedia.tudelft.nl/wiki/> {\n"+ 
                            "  ?ppl rdf:type cat:Powerplant .\n" + 
                            ((country != "" || owner == "") ? "  ?ppl prop:Country a:" + country + " .\n" : "") + 
                            "  ?ppl rdfs:label ?name .\n" + 
                            "  ?ppl prop:Ownercompany ?own .\n" + 
                            "  ?ppl prop:City ?town .\n" + 
                            "  ?ppl prop:Point ?point .\n" + 
                            "  ?ppl prop:Energyoutput-23J ?out .\n" + 
                            "  ?ppl prop:Carbonemissions-23kg ?co2 .\n" + 
                            "  ?ppl prop:Intensity-23kg ?intensity .\n" + 
                            "  OPTIONAL{?ppl prop:Primary_fuel_type ?fuel_type} .\n" + 
                            "  OPTIONAL{?ppl prop:State ?stat} .\n" + 
                            "  OPTIONAL{?ppl prop:Zipcode ?zip} .\n" + 
                            "  OPTIONAL{?own rdfs:label ?owner} .\n" + 
                            (owner != "" ? "  FILTER( REGEX(str(?owner), \".*" + owner + ".*\",\"i\") ) .\n" : "") +
			    "}.\n" +
                            "} order by ?ppl",
                    output: "json" 
                },
                dataType: 'jsonp',
                success: function(data){ drop_markers_enipedia(data, zoom); }
            });
        }

        function clearMarkers(markersArray) {
            if (markersArray) {
                for (i in markersArray) {
                    markersArray[i].setMap(null);
                    oms.removeMarker(markersArray[i]); 
                }
                markersArray.length = 0;
            }
        }


        function show_meta(meta_group, checked){

            var fuelGroups = fuelGroupsByMetaGroup[meta_group];
            for (var i in fuelGroups) { 
                fuelGroupsDisplayed[fuelGroups[i]] = checked;
            }
            matchIconsToDisplayStates();
            
            //meta checkboxes
            $('#show_all').prop('checked', false);
            $('#show_none').prop('checked', false);

            matchMarkersToSelection(window.markersEnipedia);
        }

        function show_all(checked) {
            //specific fuel types
            for (var fuel in fuelGroupsDisplayed)
                fuelGroupsDisplayed[fuel] = checked;

            //meta checkboxes        
            $('#show_nuclear').prop('checked', checked);
            $('#show_fossil').prop('checked', checked);
            $('#show_renewable').prop('checked', checked);

            matchIconsToDisplayStates();
            matchMarkersToSelection(window.markersEnipedia);
        }

        
        function matchIconsToDisplayStates() {
            for (var fuel in fuelGroupsDisplayed)
                setIconBasedOnDisplayState(fuel, $('#'+fuel.toLowerCase()+'_img')[0]);
        }

        function setIconBasedOnDisplayState(fuelGroup, clickedImg) {
            if (fuelGroupsDisplayed[fuelGroup]) {
                clickedImg.setAttribute('src', clickedImg.getAttribute('selected_img'));
            } else {
                clickedImg.setAttribute('src', clickedImg.getAttribute('deselected_img'));
            }
        }

        function toggle(fuelGroup, clickedImg) {
            fuelGroupsDisplayed[fuelGroup] = !fuelGroupsDisplayed[fuelGroup];
            setIconBasedOnDisplayState(fuelGroup, clickedImg);
            matchMarkersToSelection(window.markersEnipedia);
        }

        
        function matchMarkersToSelection(markersArray) {
            if (markersArray) {
                var re = new RegExp(selectedOwner, "i");
                for (i in markersArray) {
                    if ( fuelGroupsDisplayed[markersArray[i].fuelGroup] && 
                        ( selectedOwner == "" || markersArray[i].data.owner && re.test(markersArray[i].data.owner.value) ) )
                        markersArray[i].setMap(map);
                    else
                        markersArray[i].setMap(null);
                }
            }
        }

        function drop_markers_enipedia(data, zoom){

            //reset count for number of power plants, since we're probably looking at a different country
            for (var cnt in fuelCounts)
                fuelCounts[cnt] = 0;        

            window.data = data;
            bounds = new google.maps.LatLngBounds();
            var list = data.results.bindings;
            
            for(i = 0; i < list.length; i++){

                //figure out which type of fuel this is

                var fuelIcon = "";
                var fuel = list[i].fuel ? list[i].fuel.value : "";
                var fuelGroup = "";
                if (fuel.indexOf("Biofuel") >=0 || fuel.indexOf("Biomass") >=0 || fuel.indexOf("Peat") >=0) {
                    fuelIcon = "http://enipedia.tudelft.nl/enipedia/images/f/f0/Biomass.png";
                    fuelGroup = "Biomass";
                } else if (fuel.indexOf("Biogas") >=0) {
                    fuelIcon = "http://enipedia.tudelft.nl/enipedia/images/5/5d/Biogas.png";
                    fuelGroup = "Biogas";
                } else if (fuel.indexOf("Coal") >=0 || fuel.indexOf("Lignite") >=0) {
                    fuelIcon = "http://enipedia.tudelft.nl/enipedia/images/a/a7/Coal.png";
                    fuelGroup = "Coal";
                } else if (fuel.indexOf("Natural_Gas") >=0 || fuel.indexOf("Coke_Oven_Gas") >=0) {
                    fuelIcon = "http://enipedia.tudelft.nl/enipedia/images/7/78/Gas.png";
                    fuelGroup = "Gas";
                } else if (fuel.indexOf("Geothermal") >=0) {
                    fuelIcon = "http://enipedia.tudelft.nl/enipedia/images/0/05/Geothermal.png";
                    fuelGroup = "Geothermal";
                } else if (fuel.indexOf("Oil") >=0 || fuel.indexOf("Diesel") >=0 || fuel.indexOf("Petroleum") >=0 || fuel.indexOf("Gasoil") >=0) {
                    fuelIcon = "http://enipedia.tudelft.nl/enipedia/images/0/06/Oil.png";
                    fuelGroup = "Oil";
                } else if (fuel.indexOf("Tidal") >=0 || fuel.indexOf("Hydro") >=0) {
                    fuelIcon = "http://enipedia.tudelft.nl/enipedia/images/0/08/Hydro.png";
                    fuelGroup = "Hydro";
                } else if (fuel.indexOf("Nuclear") >=0) {
                    fuelIcon = "http://enipedia.tudelft.nl/enipedia/images/4/42/Nuclear.png";
                    fuelGroup = "Nuclear";
                } else if (fuel.indexOf("Solar") >=0) {
                    fuelIcon = "http://enipedia.tudelft.nl/enipedia/images/2/25/Solar.png";
                    fuelGroup = "Solar";
                } else if (fuel.indexOf("Wave") >=0 || fuel.indexOf("Waste.png") >= 0) {
                    fuelIcon = "http://enipedia.tudelft.nl/enipedia/images/e/e9/Wave.png";
                    fuelGroup = "Wave";
                } else if (fuel.indexOf("Refuse") >=0 || fuel.indexOf("Landfill") >=0 || fuel.indexOf("Waste") >=0) {
                    fuelIcon = "http://enipedia.tudelft.nl/enipedia/images/1/12/Waste.png";
                    fuelGroup = "Waste";
                } else if (fuel.indexOf("Wind") >=0) {
                    fuelIcon = "http://enipedia.tudelft.nl/enipedia/images/b/bf/Wind.png";
                    fuelGroup = "Wind";
                } else {
                    fuelIcon = "http://enipedia.tudelft.nl/enipedia/images/d/dd/Unknown.png";
                    fuelGroup = "Unknown";
                }
                
                fuelCounts[fuelGroup.toLowerCase()]++;

                var coords = list[i].point.value.split(', ');
                var latitude = coords[0].indexOf('N') > 0 ? coords[0].replace(' N','') : "-"+coords[0].replace(' S','');
                var longitude = coords[1].indexOf('E') > 0 ? coords[1].replace(' E','') : "-"+coords[1].replace(' W','');
                myLatLng = new google.maps.LatLng(latitude, longitude);
                
                // scale marker according to power output
                var output = list[i].Output_MWh ? list[i].Output_MWh.value : 0;
                var factor = 1 + ((output == 0 ? 0 : Math.log(output)/Math.LN10) - 5) / 10;
                markerImage = {url: fuelIcon, size: {width:32*factor, height:37*factor}, scaledSize: {width:32*factor, height:37*factor} }
                markerOptions = {position: myLatLng, title: list[i].name.value, icon: markerImage};
                
                if (fuelGroupsDisplayed[fuelGroup])
                    markerOptions.map = map;
                marker = new google.maps.Marker(markerOptions);
                marker.data = list[i];
                marker.fuelGroup = fuelGroup;
                markersEnipedia.push(marker);
                google.maps.event.addListener(marker, 'click', function() { open_info_enipedia(this)} );
                bounds.extend(myLatLng);
                
                oms.addMarker(marker); 
                    
            } //end for loop
            
            if (zoom)
                map.fitBounds(bounds);

            //show the counts in the control bar
            for (var cnt in fuelCounts)
                $('#'+cnt+'_count').text(fuelCounts[cnt].toString());        
        }
            
            
        function open_info_enipedia(marker) {
            var content = "<div style='font-size: 9pt; font-family: Arial'><span style='font-size: 12pt'>" + marker.data.name.value + "</span><ul>";
            for (p in marker.data) {
                if (p != "wiki" && p != "name" && p != "point" && marker.data[p].value != null && !(p == "ownerenc" && marker.data.owner))
                    content += "<li>" + p.replace("_"," ") + ": " + marker.data[p].value.replace("_"," ").replace(".0e0","") + "</li>";
            }
            content += "</ul><a href='http://enipedia.tudelft.nl/wiki/" + marker.data.wiki.value + "' target='EnipView'>view</a> | ";
            content += "<a href='http://enipedia.tudelft.nl/enipedia/index.php?title=" + marker.data.wiki.value + "&action=formedit' target='EnipEdit'>edit</a> in Enipedia</div>";
            infowindowEnipedia.content = content;
            infowindowEnipedia.open(map, marker);
        }

        </script>
    </head>
    <body>
        <div id="map_canvas"></div>
        <table id='everything'>
            <tr>
                <td>
                    <table id=iconTable border=0 cellpadding=0 cellspacing=0>
                        <tr>            
                            <td><label for="enipedia_countries">Country: </label></td>
                            <td><select id="enipedia_countries" style="width: 200px" onchange="load_ppl_enipedia(this.value, document.getElementById('enipedia_owner').value, true)"/></td>
                        </tr>
                        <tr>            
                            <td><label for="enipedia_owner">Owner: </label></td>
                            <td><input id="enipedia_owner" style="width: 195px" onkeypress="if (event.keyCode == 13) load_ppl_enipedia(document.getElementById('enipedia_countries').value, this.value, true)" /></td>
                        </tr>
                    </table>
                </td>
                
                <td>    
                    <table id=iconTable border=0 cellpadding=0 cellspacing=0>
                        <tr>            
                            <td><img id="biomass_img" onclick="toggle('Biomass', this)" deselected_img="http://enipedia.tudelft.nl/enipedia/images/2/2a/Biomass_deselected.png" selected_img="http://enipedia.tudelft.nl/enipedia/images/f/f0/Biomass.png" src="http://enipedia.tudelft.nl/enipedia/images/f/f0/Biomass.png" class="tooltip" title="Biomass"></td>
                            <td><img id="biogas_img" onclick="toggle('Biogas', this)" deselected_img="http://enipedia.tudelft.nl/enipedia/images/4/4a/Biogas_deselected.png" selected_img="http://enipedia.tudelft.nl/enipedia/images/5/5d/Biogas.png" src="http://enipedia.tudelft.nl/enipedia/images/5/5d/Biogas.png" class="tooltip" title="Biogas"></td>
                            <td><img id="coal_img" onclick="toggle('Coal', this)" deselected_img="http://enipedia.tudelft.nl/enipedia/images/3/3e/Coal_deselected.png" selected_img="http://enipedia.tudelft.nl/enipedia/images/a/a7/Coal.png" src="http://enipedia.tudelft.nl/enipedia/images/a/a7/Coal.png" class="tooltip" title="Coal"></td>
                            <td><img id="gas_img" onclick="toggle('Gas', this)" deselected_img="http://enipedia.tudelft.nl/enipedia/images/b/bd/Gas_deselected.png" selected_img="http://enipedia.tudelft.nl/enipedia/images/7/78/Gas.png" src="http://enipedia.tudelft.nl/enipedia/images/7/78/Gas.png" class="tooltip" title="Gas"></td>
                            <td><img id="geothermal_img" onclick="toggle('Geothermal', this)" deselected_img="http://enipedia.tudelft.nl/enipedia/images/c/c0/Geothermal_deselected.png" selected_img="http://enipedia.tudelft.nl/enipedia/images/0/05/Geothermal.png" src="http://enipedia.tudelft.nl/enipedia/images/0/05/Geothermal.png" class="tooltip" title="Geothermal"></td>
                            <td><img id="oil_img" onclick="toggle('Oil', this)" deselected_img="http://enipedia.tudelft.nl/enipedia/images/d/d7/Oil_deselected.png" selected_img="http://enipedia.tudelft.nl/enipedia/images/0/06/Oil.png" src="http://enipedia.tudelft.nl/enipedia/images/0/06/Oil.png" class="tooltip" title="Oil"></td>
                            <td><img id="hydro_img" onclick="toggle('Hydro', this)" deselected_img="http://enipedia.tudelft.nl/enipedia/images/f/fa/Hydro_deselected.png" selected_img="http://enipedia.tudelft.nl/enipedia/images/0/08/Hydro.png" src="http://enipedia.tudelft.nl/enipedia/images/0/08/Hydro.png" class="tooltip" title="Hydro"></td>
                            <td><img id="nuclear_img" onclick="toggle('Nuclear', this)" deselected_img="http://enipedia.tudelft.nl/enipedia/images/4/4f/Nuclear_deselected.png" selected_img="http://enipedia.tudelft.nl/enipedia/images/4/42/Nuclear.png" src="http://enipedia.tudelft.nl/enipedia/images/4/42/Nuclear.png" class="tooltip" title="Nuclear"></td>
                            <td><img id="solar_img" onclick="toggle('Solar', this)" deselected_img="http://enipedia.tudelft.nl/enipedia/images/7/78/Solar_deselected.png" selected_img="http://enipedia.tudelft.nl/enipedia/images/2/25/Solar.png" src="http://enipedia.tudelft.nl/enipedia/images/2/25/Solar.png" class="tooltip" title="Solar"></td>
                            <td><img id="waste_img" onclick="toggle('Waste', this)" deselected_img="http://enipedia.tudelft.nl/enipedia/images/f/fa/Waste_deselected.png" selected_img="http://enipedia.tudelft.nl/enipedia/images/1/12/Waste.png" src="http://enipedia.tudelft.nl/enipedia/images/1/12/Waste.png" class="tooltip" title="Waste"></td>
                            <td><img id="wave_img" onclick="toggle('Wave', this)" deselected_img="http://enipedia.tudelft.nl/enipedia/images/d/de/Wave_deselected.png" selected_img="http://enipedia.tudelft.nl/enipedia/images/e/e9/Wave.png" src="http://enipedia.tudelft.nl/enipedia/images/e/e9/Wave.png" class="tooltip" title="Wave"></td>
                            <td><img id="wind_img" onclick="toggle('Wind', this)" deselected_img="http://enipedia.tudelft.nl/enipedia/images/3/3f/Wind_deselected.png" selected_img="http://enipedia.tudelft.nl/enipedia/images/b/bf/Wind.png" src="http://enipedia.tudelft.nl/enipedia/images/b/bf/Wind.png" class="tooltip" title="Wind"></td>
                            <td><img id="unknown_img" onclick="toggle('Unknown', this)" deselected_img="http://enipedia.tudelft.nl/enipedia/images/b/b4/Unknown_deselected.png" selected_img="http://enipedia.tudelft.nl/enipedia/images/d/dd/Unknown.png" src="http://enipedia.tudelft.nl/enipedia/images/d/dd/Unknown.png" class="tooltip" title="Unknown"></td>
                        </tr>
                        <tr>
                            <td class="fuelCheckBoxTD"><div class='fuelCount' id='biomass_count'></div></td>
                            <td class="fuelCheckBoxTD"><div class='fuelCount' id='biogas_count'></div></td>
                            <td class="fuelCheckBoxTD"><div class='fuelCount' id='coal_count'></div></td>
                            <td class="fuelCheckBoxTD"><div class='fuelCount' id='gas_count'></div></td>
                            <td class="fuelCheckBoxTD"><div class='fuelCount' id='geothermal_count'></div></td>
                            <td class="fuelCheckBoxTD"><div class='fuelCount' id='oil_count'></div></td>
                            <td class="fuelCheckBoxTD"><div class='fuelCount' id='hydro_count'></div></td>
                            <td class="fuelCheckBoxTD"><div class='fuelCount' id='nuclear_count'></div></td>
                            <td class="fuelCheckBoxTD"><div class='fuelCount' id='solar_count'></div></td>
                            <td class="fuelCheckBoxTD"><div class='fuelCount' id='waste_count'></div></td>
                            <td class="fuelCheckBoxTD"><div class='fuelCount' id='wave_count'></div></td>
                            <td class="fuelCheckBoxTD"><div class='fuelCount' id='wind_count'></div></td>
                            <td class="fuelCheckBoxTD"><div class='fuelCount' id='unknown_count'></div></td>
                        </tr>
                    </table>
                </td>

                <td>
                    <table>
                        <tr>
                            <td class="fuelCheckBoxTD"><input onchange="show_meta('fossil',this.checked)" id="show_fossil" type="checkbox" checked="false" title="Fossil"></td>
                            <td class="fuelLabelTD"><label for="show_fossil">Fossil</label></td>
                        </tr>
                        <tr>
                            <td class="fuelCheckBoxTD"><input onchange="show_meta('nuclear',this.checked)" id="show_nuclear" type="checkbox" checked="false" title="Nuclear"></td>
                            <td class="fuelLabelTD"><label for="show_nuclear">Nuclear</label></td>
                            <td class="fuelCheckBoxTD"><input onchange="show_all(this.checked)" id="show_all" type="checkbox" checked="false" title="All"></td>
                            <td class="fuelLabelTD"><label for="show_all">All</label></td>
                        </tr>
                        <tr>
                            <td class="fuelCheckBoxTD"><input onchange="show_meta('renewable',this.checked)" id="show_renewable" type="checkbox" checked="false" title="Renewable"></td>
                            <td class="fuelLabelTD"><label for="show_renewable">Renewable</label></td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </body>
</html>


